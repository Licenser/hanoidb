{cover_enabled, true}.

{clean_files, ["*.eunit", "ebin/*.beam"]}.
{eunit_opts, [verbose, {report, {eunit_surefire, [{dir, "."}]}}]}.

{erl_opts, [%{d,'TRIQ',true}, %{d,'DEBUG',true},
            {parse_transform, lager_transform},
            fail_on_warning,
            warn_unused_vars,
            warn_export_all,
            warn_shadow_vars,
            warn_unused_import,
            warn_unused_function,
            warn_bif_clash,
            warn_unused_record,
            warn_deprecated_function,
            warn_obsolete_guard,
            warn_export_vars,
            warn_exported_vars,
            warn_untyped_record,
            % warn_missing_spec,
            % strict_validation,
            debug_info]}.

{xref_checks, [undefined_function_calls]}.

{deps, [ {sext, ".*", {git, "git://github.com/esl/sext", {branch, "master"}}}
       , {lager, ".*", {git, "git://github.com/basho/lager", {branch, "master"}}}
       , {snappy, "1.0.*", {git, "git://github.com/fdmanana/snappy-erlang-nif.git", {branch, "master"}}}
       , {plain_fsm, "1.1.*", {git, "git://github.com/gburd/plain_fsm", {branch, "master"}}}
%        , {lz4, ".*", {git, "git://github.com/gburd/erlang-lz4.git", {branch, "master"}}}
%        , {edown, "0.3.*", {git, "git://github.com/esl/edown.git", {branch, "master"}}}
%        , {asciiedoc, "0.1.*", {git, "git://github.com/norton/asciiedoc.git", {branch, "master"}}}
        , {triq, ".*", {git, "git://github.com/krestenkrab/triq.git", {branch, "master"}}}
        , {proper, ".*", {git, "git://github.com/manopapad/proper.git", {branch, "master"}}}
       ]}.

{eunit_compile_opts, [
                      %% Uncomment the following options to enable pulse testing. Note that
                      %% this will (currently) break all tests that do NOT use Pulse. As such,
                      %% this is most useful when used w/ rebar like so:
                      %% ./rebar compile eunit apps=hanoidb suite=hanoidb_eqc
                      %%
                      %% Also uncomment the nif-patching in the port_envs option above!
                      %%
                      %% NOTE1: You will have to do a "clean" to ensure everything gets compiled w/
                      %% the new flags!
                      %% NOTE2: You will need a recent (1.25.2+) version of PULSE to run the tests
                      %% and a copy of the pulsified OTP componentes (pulse_gen, etc...)
                      %%
                      {d, 'PULSE'},

                      {pulse_side_effect,
                        [
                        , {hanoidb_reader, '_', '_'}

                        , {file, '_', '_'}
                        , {filelib, '_', '_'}
                        , {os, '_', '_'} ]},

                      {pulse_replace_module,
                        [ {gen_server, pulse_gen_server}
                        , {application, pulse_application}
                        , {supervisor, pulse_supervisor} ]}
                     ]}.
